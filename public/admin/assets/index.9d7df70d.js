import{l as h}from"./logo.0d0e3826.js";import{_ as x,d as w,u as b,a as F,b as y,r as c,c as B,o as $,e as C,f as k,g as _,h as l,i as D,w as d,j as g,k as E,l as S}from"./index.e68eab72.js";const U={class:"main"},G={class:"m-4"},L={class:"flex space-x-3 mt-12"},N=w({__name:"index",setup(V){const o=b(),v=F(),p=y(),a=c(!1),f=B(),u=c(null);function i(t){var n,s;console.log(t);const e=t.data.data;((n=e==null?void 0:e.access_token)==null?void 0:n.length)>0?(f.saveUserData(e),o.success("\u767B\u5F55\u6210\u529F\uFF0C\u5373\u5C06\u8FDB\u5165\u7CFB\u7EDF"),p.replace("/")):o.error(((s=t.data)==null?void 0:s.message)||"\u767B\u5F55\u5931\u8D25"),a.value=!1,u.value&&u.value.destroy()}$(()=>{window.removeEventListener("message",i)});function r(t="github"){o.destroyAll(),a.value=!0,u.value=o.loading("\u767B\u5F55\u4E2D...",{duration:0});const e={width:700,height:700,left:(window.screen.availWidth-30-500)/2,top:(window.screen.availHeight-30-500)/2};window.open(`${v.baseUrl}/auth/oauth/${t}`,"Login",`height=${e.height}, width=${e.width}, top=${e.top}, left=${e.left}, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no`),window.addEventListener("message",i,!0)}return(t,e)=>{const n=E,s=S;return C(),k("div",U,[_("div",G,[l(n,{class:"m-auto flex cursor-pointer avatar",size:72,src:D(h)},null,8,["src"])]),_("div",L,[l(s,{loading:a.value,onClick:e[0]||(e[0]=m=>r("github")),class:"btn flex-1",tertiary:!0},{default:d(()=>[g(" Github ")]),_:1},8,["loading"]),l(s,{loading:a.value,onClick:e[1]||(e[1]=m=>r("gitee")),class:"btn flex-1",tertiary:!0},{default:d(()=>[g(" Gitee ")]),_:1},8,["loading"])])])}}});var R=x(N,[["__scopeId","data-v-75f62950"]]);export{R as default};
