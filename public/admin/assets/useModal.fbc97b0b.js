var A=Object.defineProperty,R=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var k=(n,e,t)=>e in n?A(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,p=(n,e)=>{for(var t in e||(e={}))j.call(e,t)&&k(n,t,e[t]);if(P)for(var t of P(e))O.call(e,t)&&k(n,t,e[t]);return n},X=(n,e)=>R(n,U(e));var L=(n,e,t)=>new Promise((i,c)=>{var r=u=>{try{a(t.next(u))}catch(d){c(d)}},o=u=>{try{a(t.throw(u))}catch(d){c(d)}},a=u=>u.done?i(u.value):Promise.resolve(u.value).then(r,o);a((t=t.apply(n,e)).next())});import{E as V,d as q,bd as z,r as x,a6 as S,i as _,e as F,x as G,aC as J,w as y,h as C,j as Y,t as I,aB as E,g as K,ax as Q,a_ as H,l as Z,D as ee,aP as te,a4 as oe,ah as ne,aX as se}from"./index.e68eab72.js";import{a as ae}from"./index.esm.dae7b788.js";const le=X(p({},V.props),{subBtuText:{type:String,default:"\u786E\u8BA4"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}}),m=function(n,e){var t;return n.currentStyle?n.currentStyle[e]:(t=document.defaultView)==null?void 0:t.getComputedStyle(n,null)[e]},l={left:0,top:0,currentX:0,currentY:0,flag:!1},ue=function(n,e,t){const i=document.body.clientWidth,c=document.documentElement.clientHeight,r=e.offsetWidth,o=e.offsetHeight,a=e.offsetLeft,u=e.offsetTop,d=i-a-r,h=c-u-o;m(e,"left")!=="auto"&&(l.left=m(e,"left")),m(e,"top")!=="auto"&&(l.top=m(e,"top")),n.onmousedown=function(f){l.flag=!0,f||(f=window.event,n.onselectstart=function(){return!1});const g=f;l.currentX=g.clientX,l.currentY=g.clientY},document.onmouseup=function(){l.flag=!1,m(e,"left")!=="auto"&&(l.left=m(e,"left")),m(e,"top")!=="auto"&&(l.top=m(e,"top"))},document.onmousemove=function(f){const g=f||window.event;if(l.flag){const v=g.clientX,M=g.clientY,B=v-l.currentX,w=M-l.currentY;let b=parseInt(l.left)+B,s=parseInt(l.top)+w;return-b>a?b=-a:b>d&&(b=d),-s>u?s=-u:s>h&&(s=h),e.style.left=b+"px",e.style.top=s+"px",typeof t=="function"&&t((parseInt(l.left)||0)+B,(parseInt(l.top)||0)+w),f.preventDefault&&f.preventDefault(),!1}}};const ce={class:"w-full cursor-move",id:"basic-modal-bar"},de=q({__name:"BasicModal",props:p({},le),emits:["on-close","on-ok","register"],setup(n,{emit:e}){const t=n,i=z(),c=x(null),r=x(!1),o=x(!1),a=S(()=>p(p({},t),_(c))),u=S(()=>{const{subBtuText:s}=c.value;return s||t.subBtuText});function d(s){return L(this,null,function*(){c.value=te(_(c)||{},s)})}const h=S(()=>p(p(p({},i),_(a)),_(c)));function f(s){o.value=s}function g(){r.value=!0,oe(()=>{const s=document.getElementById("basic-modal"),D=document.getElementById("basic-modal-bar");ue(D,s)})}function v(){r.value=!1,o.value=!1,e("on-close")}function M(){r.value=!1,e("on-close")}function B(){o.value=!0,console.log(o.value),e("on-ok")}const w={setProps:d,openModal:g,closeModal:v,setSubLoading:f};return H()&&e("register",w),(s,D)=>{const T=Z,N=ee,W=V;return F(),G(W,Q({id:"basic-modal"},_(h),{show:r.value,"onUpdate:show":D[0]||(D[0]=$=>r.value=$),onClose:M}),J({header:y(()=>[K("div",ce,I(_(h).title),1)]),default:y(()=>[E(s.$slots,"default")]),_:2},[s.$slots.action?{name:"action",fn:y(()=>[E(s.$slots,"action")]),key:"1"}:{name:"action",fn:y(()=>[C(N,null,{default:y(()=>[C(T,{onClick:v},{default:y(()=>[Y("\u53D6\u6D88")]),_:1}),C(T,{type:"primary",loading:o.value,onClick:B},{default:y(()=>[Y(I(_(u)),1)]),_:1},8,["loading"])]),_:1})]),key:"0"}]),1040,["show"])}}});function pe(n){const e=x(null),t=H(),i=()=>{const o=_(e.value);return o||console.error("useModal instance is undefined!"),o};return[o=>{ae(()=>{e.value=null}),e.value=o,t==null||t.emit("register",o),ne(()=>n,()=>{n&&o.setProps(se(n))},{immediate:!0,deep:!0})},{setProps:o=>{var a;(a=i())==null||a.setProps(o)},openModal:()=>{var o;(o=i())==null||o.openModal()},closeModal:()=>{var o;(o=i())==null||o.closeModal()},setSubLoading:o=>{var a;(a=i())==null||a.setSubLoading(o)}}]}export{de as _,pe as u};
